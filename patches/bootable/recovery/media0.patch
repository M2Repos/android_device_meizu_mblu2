From 2b89c288722cb03687eed4afc299e935cd47cafc Mon Sep 17 00:00:00 2001
From: Dinolek <18579460+Dinolek@users.noreply.github.com>
Date: Sun, 12 Jul 2020 12:29:25 +0200
Subject: [PATCH 2/2] Always use /data/media/0 instead of /data/media

Change-Id: I87d1b9fa51f22a4c2e6e7b258e89c0eedb0163da
---
 partition.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/partition.cpp b/partition.cpp
index 6f61de3..e42cdd6 100755
--- a/partition.cpp
+++ b/partition.cpp
@@ -1170,6 +1170,10 @@ void TWPartition::Setup_Data_Media() {
 			Make_Dir("/sdcard", false);
 			Symlink_Mount_Point = "/sdcard";
 		}
+		if (!TWFunc::Path_Exists(Mount_Point + "/media/0")) {
+			mkdir(Storage_Path.c_str(), 0770);
+			mkdir((Mount_Point + "/media/0").c_str(), 0770);
+		}
 		if (Mount(false) && TWFunc::Path_Exists(Mount_Point + "/media/0")) {
 			Storage_Path = Mount_Point + "/media/0";
 			Symlink_Path = Storage_Path;
-- 
2.27.0

